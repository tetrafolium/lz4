---
inspecode:

  global:

  tasks:

    - name: dockerfilelint
      type: docker-build
      dockerfile: 'inspecode-dockerfilelint.Dockerfile'
      options:
        --build-arg: OUTDIR=/.reports
      artifacts:
        {from: dockerfilelint-task, path: '/.reports/'}
      reports:
        {from: dockerfilelint-task, path: '/.reports/dockerfilelint.sarif', format: SARIF}
      thresholds: {num-issues: 999}

    - name: hadolint
      type: docker-build
      dockerfile: 'inspecode-hadolint.Dockerfile'
      options:
        --build-arg: OUTDIR=/.reports
      artifacts:
        {from: hadolint-task, path: '/.reports/'}
      reports:
        {from: hadolint-task, path: '/.reports/hadolint.sarif', format: SARIF}
      thresholds: {num-issues: 999}

    - name: yamllint_SARIF
      type: docker-build
      dockerfile: 'inspecode-yamllint.Dockerfile'
      options:
        --build-arg: OUTDIR=/.reports
      artifacts:
        {from: yamllint-task, path: '/.reports/'}
      reports:
        {from: yamllint-task, path: '/.reports/yamllint.sarif', format: SARIF}
      thresholds: {num-issues: 999}

  tools:

    astyle:
      auto-fix: true
      thresholds: {num-issues: 41}

    clang-format:
      auto-fix: true
      thresholds: {num-issues: 51}

    cpd:
      thresholds: {num-issues: 12}

    cppcheck:
      thresholds: {num-issues: 4}

    cpplint:
      options:
        --filter:
          - +
          - -whitespace
          - -readability/casting
      thresholds: {num-issues: 432}

    # fortify:

    fossology:
      thresholds: {num-issues: 44}

    grep:
      thresholds: {num-issues: 1}

    misspell:
      auto-fix: true
      thresholds: {num-issues: 11}

    infer:
      thresholds: {num-issues: 20}

    jscpd:
      thresholds: {num-issues: 17}

    scan-build:
      thresholds: {num-issues: 4}

    uncrustify:
      config-file: '.rocro/uncrustify.cfg'
      # auto-fix: true
      thresholds: {num-issues: 999}

    # understand

    unused:
      thresholds: {num-issues: 31}
